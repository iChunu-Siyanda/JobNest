{% extends 'base.html' %}
{% block content %}

<!-- Search Bar -->
<div class="d-flex justify-content-center mt-3">
  <form method="POST" class="border d-flex col-10 col-md-8 shadow rounded-pill bg-white p-2">
    {{ form.hidden_tag() }}

    <!-- Job search field -->
    <div class="input-group flex-fill me-2">
      {{ form.job_search(class="form-control border-0 rounded-pill text-center px-3", placeholder="Search Job") }}
    </div>

    <!-- Location search field -->
    <div class="input-group flex-fill me-2">
      {{ form.loc_search(class="form-control border-0 rounded-pill text-center px-3", placeholder="Location") }}
    </div>

    <!-- Submit button -->
    <div>
      {{ form.submit(class="btn btn-primary rounded-pill px-4") }}
    </div>
  </form>
</div>


<hr/>

<div class="container mt-5">

  <!-- Featured Jobs -->
<!--  <h3 class="mb-4">Featured Jobs</h3>-->
<!--  <div class="row row-cols-1 row-cols-md-3 g-4">-->
<!--    {% for job in featured_jobs %}-->
<!--      <div class="col">-->
<!--        <div class="card text-white h-100 shadow-sm border-0"-->
<!--             style="background-image: url('{{ job.bg_image }}'); background-size: cover; background-position: center; border-radius: 1rem;">-->
<!--          <div class="card-body d-flex flex-column justify-content-end" style="background: rgba(0,0,0,0.5); border-radius: 1rem; padding: 1.5rem;">-->
<!--            <h5 class="card-title">{{ job.title }}</h5>-->
<!--            <p class="card-text mb-1">{{ job.company }}</p>-->
<!--            <p class="card-text mb-2">{{ job.location }}</p>-->
<!--            <a href="{{ job.redirect_url }}" target="_blank" class="btn btn-primary mt-2">Apply Now</a>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    {% endfor %}-->
<!--  </div>-->

<!--  Job Near Me  -->
    <h3 class="mt-5 mb-3">Jobs Near Me</h3>
    <div class="row tips">
        <div class="card h-100 shadow border-1 rounded-4">
            <div class="card-body">
                <h5 class="card-title">Jobs Near Me</h5>
                <p class="card-text">Find jobs available near your current location using geolocation.</p>
                <button id="find-jobs-btn" class="btn btn-outline-primary rounded-pill">Find Jobs</button>
            </div>
        </div>
    </div>

    <!-- Career Tips -->
    <h3 class="mt-5 mb-3">Career Tips</h3>
    <div class="row row-cols-1 row-cols-md-2 g-4">
        <div class="col tips">
            <div class="card h-100 shadow border-1 rounded-4">
                <div class="card-body">
                    <h5 class="card-title">CV Tips</h5>
                    <p class="card-text">Learn how to make your CV stand out to recruiters and get more interviews.</p>
                    <a href="/tips/cv" class="btn btn-outline-primary rounded-pill">Read More</a>
                </div>
            </div>
        </div>
        <div class="col tips">
            <div class="card h-100 shadow border-1 rounded-4">
                <div class="card-body">
                    <h5 class="card-title">Interview Tips</h5>
                    <p class="card-text">Prepare effectively and impress hiring managers with these interview strategies.</p>
                    <a href="/tips/interview" class="btn btn-outline-primary rounded-pill">Read More</a>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Geolocation Script -->
<script>
document.getElementById("find-jobs-btn").addEventListener("click", function() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      // Redirect to job search with lat/lon (backend should convert to city if needed)
      window.location.href = `/jobs/?location=${lat},${lon}&job=`;
    }, function(error) {
      alert("Could not get your location. Please allow location access.");
    });
  } else {
    alert("Geolocation is not supported by your browser.");
  }
});
</script>

{% endblock %}
